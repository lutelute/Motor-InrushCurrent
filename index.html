<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ¢ãƒ¼ã‚¿ãƒ¼çªå…¥é›»æµã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/recharts@2.8.0/esm/index.js" type="module"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            color: white;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .motor-card {
            background: rgba(55, 65, 81, 0.9);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #3B82F6;
        }
        .parameter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .parameter-item {
            background: rgba(75, 85, 99, 0.8);
            padding: 15px;
            border-radius: 8px;
        }
        .parameter-item label {
            display: block;
            font-size: 0.8rem;
            color: #9CA3AF;
            margin-bottom: 8px;
        }
        .parameter-item input, .parameter-item select {
            width: 100%;
            background: #374151;
            border: none;
            border-radius: 6px;
            padding: 8px;
            color: white;
            font-size: 0.9rem;
        }
        .motor-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            background: #374151;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .motor-tab {
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        .motor-tab.active {
            background: #3B82F6;
            color: white;
        }
        .motor-tab:not(.active) {
            background: #4B5563;
            color: #D1D5DB;
        }
        .motor-tab:hover:not(.active) {
            background: #6B7280;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        .stat-card {
            background: #374151;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 5px;
        }
        .chart-container {
            background: #374151;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .comparison-table {
            width: 100%;
            background: #374151;
            border-radius: 8px;
            overflow: hidden;
        }
        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #4B5563;
        }
        .comparison-table th {
            background: #1F2937;
            font-weight: bold;
            color: #9CA3AF;
        }
        .comparison-table tr:hover {
            background: #4B5563;
            cursor: pointer;
        }
        .rotor-diagram {
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }
        .circuit-container {
            background: #1F2937;
            border: 2px solid #22C55E;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .toggle-button {
            background: #4B5563;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: background 0.3s;
        }
        .toggle-button.active {
            background: #3B82F6;
        }
        .toggle-button:hover {
            background: #6B7280;
        }
        .toggle-button.active:hover {
            background: #2563EB;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // ãƒ¢ãƒ¼ã‚¿ãƒ¼ç¨®é¡ã®å®šç¾©
        const MOTOR_TYPES = {
            squirrelCage: {
                id: 'squirrelCage',
                name: 'ã‹ã”å‹èª˜å°æ©Ÿ',
                category: 'èª˜å°æ©Ÿ',
                description: 'æœ€ã‚‚æ™®åŠã€‚å›è»¢å­ã«å°ä½“ãƒãƒ¼ï¼ˆã‹ã”çŠ¶ï¼‰ã‚’é…ç½®ã€‚æ§‹é€ ãŒã‚·ãƒ³ãƒ—ãƒ«ã§å …ç‰¢ã€‚',
                features: ['æ§‹é€ ãŒå˜ç´”ã§å®‰ä¾¡', 'ä¿å®ˆãŒå®¹æ˜“', 'å§‹å‹•é›»æµãŒå¤§ãã„ï¼ˆå®šæ ¼ã®4ã€œ8å€ï¼‰', 'å§‹å‹•ãƒˆãƒ«ã‚¯ã¯ä¸­ç¨‹åº¦'],
                applications: 'ãƒãƒ³ãƒ—ã€ãƒ•ã‚¡ãƒ³ã€ã‚³ãƒ³ãƒ™ã‚¢ã€å·¥ä½œæ©Ÿæ¢°ãªã©',
                inrushMultiplier: 6,
                startTorque: 1.5,
                hasSlipRings: false,
                rotorType: 'cage',
            },
            woundRotor: {
                id: 'woundRotor',
                name: 'å·»ç·šå‹èª˜å°æ©Ÿ',
                category: 'èª˜å°æ©Ÿ',
                description: 'å›è»¢å­ã«ä¸‰ç›¸å·»ç·šã‚’æŒã¡ã€ã‚¹ãƒªãƒƒãƒ—ãƒªãƒ³ã‚°ã§å¤–éƒ¨æŠµæŠ—ã‚’æ¥ç¶šå¯èƒ½ã€‚',
                features: ['å¤–éƒ¨æŠµæŠ—ã§å§‹å‹•é›»æµã‚’åˆ¶å¾¡å¯èƒ½', 'å§‹å‹•ãƒˆãƒ«ã‚¯ã‚’å¤§ããã§ãã‚‹', 'é€Ÿåº¦åˆ¶å¾¡ãŒå¯èƒ½ï¼ˆåŠ¹ç‡ã¯ä½ä¸‹ï¼‰', 'æ§‹é€ ãŒè¤‡é›‘ã§ã‚³ã‚¹ãƒˆé«˜'],
                applications: 'ã‚¯ãƒ¬ãƒ¼ãƒ³ã€ãƒ›ã‚¤ã‚¹ãƒˆã€å¤§å‹ãƒãƒ³ãƒ—ã€åœ§ç¸®æ©Ÿ',
                inrushMultiplier: 3,
                startTorque: 2.5,
                hasSlipRings: true,
                rotorType: 'wound',
            },
            salientPole: {
                id: 'salientPole',
                name: 'çªæ¥µå‹åŒæœŸæ©Ÿ',
                category: 'åŒæœŸæ©Ÿ',
                description: 'ç£æ¥µãŒå›è»¢å­ã‹ã‚‰çªå‡ºã€‚ä½é€Ÿãƒ»å¤šæ¥µç”¨é€”ã«æœ€é©ã€‚',
                features: ['æ¥µæ•°ã‚’å¤šãã§ãã‚‹ï¼ˆæ°´è»Šç›´çµå‘ãï¼‰', 'å›è»¢æ•°ã¯é›»æºå‘¨æ³¢æ•°ã«åŒæœŸ', 'åŠ›ç‡èª¿æ•´ãŒå¯èƒ½', 'ãƒ€ãƒ³ãƒ‘å·»ç·šã§å§‹å‹•ï¼ˆèª˜å°æ©Ÿã¨ã—ã¦ï¼‰'],
                applications: 'æ°´åŠ›ç™ºé›»æ©Ÿã€ä½é€Ÿå¤§å‹æ©Ÿæ¢°',
                inrushMultiplier: 5,
                startTorque: 0.4,
                hasSlipRings: true,
                rotorType: 'salient',
            },
            cylindrical: {
                id: 'cylindrical',
                name: 'å††ç­’å‹åŒæœŸæ©Ÿ',
                category: 'åŒæœŸæ©Ÿ',
                description: 'å††ç­’å½¢ã®å›è»¢å­ã«æºã‚’åˆ‡ã£ã¦ç•Œç£å·»ç·šã‚’åç´ã€‚é«˜é€Ÿå›è»¢å‘ãã€‚',
                features: ['é«˜é€Ÿå›è»¢ã«é©ã—ãŸæ§‹é€ ï¼ˆ2æ¥µ/4æ¥µï¼‰', 'æ©Ÿæ¢°çš„å¼·åº¦ãŒé«˜ã„', 'é¢¨æãŒå°‘ãªã„', 'ã‚¿ãƒ¼ãƒ“ãƒ³ç›´çµã«æœ€é©'],
                applications: 'ç«åŠ›ãƒ»åŸå­åŠ›ç™ºé›»æ©Ÿï¼ˆã‚¿ãƒ¼ãƒ“ãƒ³ç™ºé›»æ©Ÿï¼‰',
                inrushMultiplier: 5,
                startTorque: 0.3,
                hasSlipRings: true,
                rotorType: 'cylindrical',
            },
        };

        // ç°¡æ˜“ãƒãƒ£ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        function SimpleChart({ data, selectedMotor }) {
            const canvasRef = React.useRef(null);

            React.useEffect(() => {
                if (!data.length) return;
                
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                const width = canvas.width;
                const height = canvas.height;
                
                // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¯ãƒªã‚¢
                ctx.clearRect(0, 0, width, height);
                
                // ãƒ‡ãƒ¼ã‚¿ã®ç¯„å›²ã‚’è¨ˆç®—
                const maxTime = Math.max(...data.map(d => d.time));
                const maxCurrent = Math.max(...data.map(d => Math.max(Math.abs(d.iU), Math.abs(d.iV), Math.abs(d.iW))));
                const minCurrent = -maxCurrent;
                
                // ã‚¹ã‚±ãƒ¼ãƒ«é–¢æ•°
                const scaleX = (t) => (t / maxTime) * (width - 80) + 40;
                const scaleY = (i) => height/2 - (i / maxCurrent) * (height/2 - 20);
                
                // ã‚°ãƒªãƒƒãƒ‰ã‚’æç”»
                ctx.strokeStyle = '#4B5563';
                ctx.lineWidth = 1;
                ctx.setLineDash([2, 2]);
                
                // æ°´å¹³ã‚°ãƒªãƒƒãƒ‰
                for (let i = -maxCurrent; i <= maxCurrent; i += maxCurrent/4) {
                    const y = scaleY(i);
                    ctx.beginPath();
                    ctx.moveTo(40, y);
                    ctx.lineTo(width - 40, y);
                    ctx.stroke();
                }
                
                // å‚ç›´ã‚°ãƒªãƒƒãƒ‰
                for (let t = 0; t <= maxTime; t += maxTime/8) {
                    const x = scaleX(t);
                    ctx.beginPath();
                    ctx.moveTo(x, 20);
                    ctx.lineTo(x, height - 20);
                    ctx.stroke();
                }
                ctx.setLineDash([]);
                
                // ã‚¼ãƒ­ãƒ©ã‚¤ãƒ³
                ctx.strokeStyle = '#6B7280';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(40, height/2);
                ctx.lineTo(width - 40, height/2);
                ctx.stroke();
                
                // ä¸‰ç›¸é›»æµã‚’æç”»
                const phases = [
                    { key: 'iU', color: '#EF4444', name: 'Uç›¸' },
                    { key: 'iV', color: '#22C55E', name: 'Vç›¸' },
                    { key: 'iW', color: '#3B82F6', name: 'Wç›¸' }
                ];
                
                phases.forEach(phase => {
                    ctx.strokeStyle = phase.color;
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    
                    data.forEach((point, index) => {
                        const x = scaleX(point.time);
                        const y = scaleY(point[phase.key]);
                        
                        if (index === 0) {
                            ctx.moveTo(x, y);
                        } else {
                            ctx.lineTo(x, y);
                        }
                    });
                    
                    ctx.stroke();
                });
                
                // å‡¡ä¾‹ã‚’æç”»
                ctx.font = '12px Arial';
                phases.forEach((phase, index) => {
                    ctx.fillStyle = phase.color;
                    ctx.fillRect(width - 160 + index * 50, 30, 15, 15);
                    ctx.fillStyle = '#D1D5DB';
                    ctx.fillText(phase.name, width - 140 + index * 50, 42);
                });
                
                // è»¸ãƒ©ãƒ™ãƒ«
                ctx.fillStyle = '#9CA3AF';
                ctx.font = '11px Arial';
                ctx.fillText('æ™‚é–“ [ms]', width/2 - 20, height - 5);
                
                // Yè»¸ãƒ©ãƒ™ãƒ«ï¼ˆå›è»¢ï¼‰
                ctx.save();
                ctx.translate(15, height/2);
                ctx.rotate(-Math.PI/2);
                ctx.fillText('é›»æµ [A]', 0, 0);
                ctx.restore();
                
                // Yè»¸ç›®ç››ã‚Š
                for (let i = -maxCurrent; i <= maxCurrent; i += maxCurrent/2) {
                    if (i === 0) continue;
                    const y = scaleY(i);
                    ctx.fillStyle = '#9CA3AF';
                    ctx.fillText(i.toFixed(0), 5, y + 4);
                }
                
                // Xè»¸ç›®ç››ã‚Š
                for (let t = 0; t <= maxTime; t += maxTime/4) {
                    const x = scaleX(t);
                    ctx.fillStyle = '#9CA3AF';
                    ctx.fillText(t.toFixed(0), x - 10, height - 25);
                }
                
            }, [data]);

            return (
                <canvas 
                    ref={canvasRef} 
                    width={800} 
                    height={400}
                    style={{width: '100%', height: 'auto', maxWidth: '800px'}}
                />
            );
        }

        // å›è»¢å­å›³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        function RotorDiagram({ type }) {
            switch (type) {
                case 'cage':
                    return (
                        <svg viewBox="0 0 200 200" className="rotor-diagram">
                            <circle cx="100" cy="100" r="80" fill="#374151" stroke="#6B7280" strokeWidth="2" />
                            <circle cx="100" cy="100" r="60" fill="#1F2937" stroke="#6B7280" strokeWidth="1" />
                            {Array.from({length: 12}).map((_, i) => {
                                const angle = (i * 30 * Math.PI) / 180;
                                const x1 = 100 + 60 * Math.cos(angle);
                                const y1 = 100 + 60 * Math.sin(angle);
                                const x2 = 100 + 78 * Math.cos(angle);
                                const y2 = 100 + 78 * Math.sin(angle);
                                return <line key={i} x1={x1} y1={y1} x2={x2} y2={y2} stroke="#F59E0B" strokeWidth="4" />;
                            })}
                            <circle cx="100" cy="100" r="60" fill="none" stroke="#F59E0B" strokeWidth="3" />
                            <circle cx="100" cy="100" r="78" fill="none" stroke="#F59E0B" strokeWidth="3" />
                            <circle cx="100" cy="100" r="15" fill="#4B5563" stroke="#6B7280" strokeWidth="2" />
                            <text x="100" y="185" textAnchor="middle" fill="#9CA3AF" fontSize="10">ã‹ã”å‹å›è»¢å­</text>
                        </svg>
                    );
                case 'wound':
                    return (
                        <svg viewBox="0 0 200 200" className="rotor-diagram">
                            <circle cx="100" cy="100" r="80" fill="#374151" stroke="#6B7280" strokeWidth="2" />
                            <circle cx="100" cy="100" r="60" fill="#1F2937" stroke="#6B7280" strokeWidth="1" />
                            {[0, 120, 240].map((deg, i) => {
                                const colors = ['#EF4444', '#22C55E', '#3B82F6'];
                                const angle = (deg * Math.PI) / 180;
                                return (
                                    <g key={i}>
                                        <path
                                            d={`M${100 + 30 * Math.cos(angle)},${100 + 30 * Math.sin(angle)} 
                                                Q${100 + 50 * Math.cos(angle + 0.3)},${100 + 50 * Math.sin(angle + 0.3)} 
                                                ${100 + 70 * Math.cos(angle)},${100 + 70 * Math.sin(angle)}`}
                                            fill="none" stroke={colors[i]} strokeWidth="3"
                                        />
                                        <path
                                            d={`M${100 + 30 * Math.cos(angle + Math.PI)},${100 + 30 * Math.sin(angle + Math.PI)} 
                                                Q${100 + 50 * Math.cos(angle + Math.PI - 0.3)},${100 + 50 * Math.sin(angle + Math.PI - 0.3)} 
                                                ${100 + 70 * Math.cos(angle + Math.PI)},${100 + 70 * Math.sin(angle + Math.PI)}`}
                                            fill="none" stroke={colors[i]} strokeWidth="3"
                                        />
                                    </g>
                                );
                            })}
                            <circle cx="100" cy="100" r="20" fill="none" stroke="#F59E0B" strokeWidth="4" />
                            <circle cx="100" cy="100" r="12" fill="#4B5563" stroke="#6B7280" strokeWidth="2" />
                            <text x="100" y="185" textAnchor="middle" fill="#9CA3AF" fontSize="10">å·»ç·šå‹å›è»¢å­</text>
                        </svg>
                    );
                case 'salient':
                    return (
                        <svg viewBox="0 0 200 200" className="rotor-diagram">
                            <circle cx="100" cy="100" r="80" fill="#374151" stroke="#6B7280" strokeWidth="2" />
                            {[0, 90, 180, 270].map((deg, i) => {
                                const angle = (deg * Math.PI) / 180;
                                const x = 100 + 45 * Math.cos(angle);
                                const y = 100 + 45 * Math.sin(angle);
                                return (
                                    <g key={i}>
                                        <rect
                                            x={x - 15} y={y - 25}
                                            width="30" height="50"
                                            fill="#1F2937" stroke="#EC4899" strokeWidth="2"
                                            transform={`rotate(${deg}, ${x}, ${y})`}
                                        />
                                        <rect
                                            x={x - 10} y={y - 20}
                                            width="20" height="40"
                                            fill="none" stroke="#F59E0B" strokeWidth="2"
                                            transform={`rotate(${deg}, ${x}, ${y})`}
                                        />
                                    </g>
                                );
                            })}
                            <circle cx="100" cy="100" r="25" fill="#4B5563" stroke="#6B7280" strokeWidth="2" />
                            <text x="100" y="185" textAnchor="middle" fill="#9CA3AF" fontSize="10">çªæ¥µå‹å›è»¢å­</text>
                        </svg>
                    );
                case 'cylindrical':
                    return (
                        <svg viewBox="0 0 200 200" className="rotor-diagram">
                            <circle cx="100" cy="100" r="80" fill="#374151" stroke="#6B7280" strokeWidth="2" />
                            <circle cx="100" cy="100" r="65" fill="#1F2937" stroke="#6B7280" strokeWidth="1" />
                            {Array.from({length: 24}).map((_, i) => {
                                const angle = (i * 15 * Math.PI) / 180;
                                const x1 = 100 + 40 * Math.cos(angle);
                                const y1 = 100 + 40 * Math.sin(angle);
                                const x2 = 100 + 63 * Math.cos(angle);
                                const y2 = 100 + 63 * Math.sin(angle);
                                return <line key={i} x1={x1} y1={y1} x2={x2} y2={y2} stroke="#F59E0B" strokeWidth="2" />;
                            })}
                            <circle cx="100" cy="100" r="40" fill="#1F2937" stroke="#6B7280" strokeWidth="1" />
                            <circle cx="100" cy="100" r="15" fill="#4B5563" stroke="#6B7280" strokeWidth="2" />
                            <text x="100" y="185" textAnchor="middle" fill="#9CA3AF" fontSize="10">å††ç­’å‹å›è»¢å­</text>
                        </svg>
                    );
                default:
                    return null;
            }
        }

        // ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        function MotorStartupSimulator() {
            const [selectedMotor, setSelectedMotor] = useState('squirrelCage');
            const [ratedPower, setRatedPower] = useState(7.5);
            const [ratedVoltage, setRatedVoltage] = useState(200);
            const [frequency, setFrequency] = useState(50);
            const [switchingAngle, setSwitchingAngle] = useState(0);
            const [dcTimeConstant, setDcTimeConstant] = useState(50);
            const [viewCycles, setViewCycles] = useState(10);
            const [stopTime, setStopTime] = useState(50);
            const [showCircuit, setShowCircuit] = useState(false);

            const motor = MOTOR_TYPES[selectedMotor];
            const inrushMultiplier = motor.inrushMultiplier;

            const simulationData = useMemo(() => {
                const omega = 2 * Math.PI * frequency;
                const period = 1 / frequency;
                const ratedCurrent = (ratedPower * 1000) / (Math.sqrt(3) * ratedVoltage * 0.85);
                const peakRated = ratedCurrent * Math.sqrt(2);
                const peakInrush = peakRated * inrushMultiplier;
                
                const phi0 = (switchingAngle * Math.PI) / 180;
                const tau = dcTimeConstant / 1000;
                const tauAC = motor.category === 'åŒæœŸæ©Ÿ' ? 0.5 : 0.3;
                
                const stopTimeS = stopTime / 1000;
                const runTime = period * viewCycles;
                const totalTime = stopTimeS + runTime;
                const dt = period / 100;
                const steps = Math.floor(totalTime / dt);
                
                const data = [];
                let maxCurrent = 0;
                
                for (let i = 0; i <= steps; i++) {
                    const t = i * dt;
                    const tMs = t * 1000;
                    
                    if (t < stopTimeS) {
                        data.push({
                            time: parseFloat(tMs.toFixed(2)),
                            iU: 0, iV: 0, iW: 0,
                            peakRated: parseFloat(peakRated.toFixed(1)),
                        });
                        continue;
                    }
                    
                    const tRun = t - stopTimeS;
                    const amplitudeDecay = 1 + (inrushMultiplier - 1) * Math.exp(-tRun / tauAC);
                    const currentAmplitude = peakRated * amplitudeDecay;
                    
                    const phaseU = omega * tRun + phi0;
                    const phaseV = omega * tRun + phi0 - (2 * Math.PI / 3);
                    const phaseW = omega * tRun + phi0 + (2 * Math.PI / 3);
                    
                    const dcU = -currentAmplitude * Math.sin(phi0) * Math.exp(-tRun / tau);
                    const dcV = -currentAmplitude * Math.sin(phi0 - (2 * Math.PI / 3)) * Math.exp(-tRun / tau);
                    const dcW = -currentAmplitude * Math.sin(phi0 + (2 * Math.PI / 3)) * Math.exp(-tRun / tau);
                    
                    const iU = currentAmplitude * Math.sin(phaseU) + dcU;
                    const iV = currentAmplitude * Math.sin(phaseV) + dcV;
                    const iW = currentAmplitude * Math.sin(phaseW) + dcW;
                    
                    maxCurrent = Math.max(maxCurrent, Math.abs(iU), Math.abs(iV), Math.abs(iW));
                    
                    data.push({
                        time: parseFloat(tMs.toFixed(2)),
                        iU: parseFloat(iU.toFixed(1)),
                        iV: parseFloat(iV.toFixed(1)),
                        iW: parseFloat(iW.toFixed(1)),
                        peakRated: parseFloat(peakRated.toFixed(1)),
                    });
                }
                
                return { data, ratedCurrent, peakRated, peakInrush, maxCurrent, stopTimeMs: stopTime };
            }, [ratedPower, ratedVoltage, frequency, inrushMultiplier, switchingAngle, dcTimeConstant, viewCycles, stopTime, motor]);

            const getPhaseDescription = (angle) => {
                if (angle === 0 || angle === 180) return 'DCæˆåˆ†æœ€å°';
                if (angle === 90 || angle === 270) return 'DCæˆåˆ†æœ€å¤§';
                return '';
            };

            return (
                <div className="container">
                    <header style={{textAlign: 'center', marginBottom: '30px'}}>
                        <h1 style={{fontSize: '2.5rem', margin: '0 0 10px 0', color: '#3B82F6'}}>
                            âš¡ ãƒ¢ãƒ¼ã‚¿ãƒ¼çªå…¥é›»æµã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
                        </h1>
                        <p style={{fontSize: '1.1rem', color: '#9CA3AF', margin: 0}}>
                            å§‹å‹•æ™‚ã®ä¸‰ç›¸é›»æµæ³¢å½¢ã¨DCæˆåˆ†ã‚’å¯è¦–åŒ–
                        </p>
                    </header>

                    {/* ãƒ¢ãƒ¼ã‚¿ãƒ¼ç¨®é¡é¸æŠ */}
                    <div className="motor-tabs">
                        {Object.values(MOTOR_TYPES).map((m) => (
                            <div
                                key={m.id}
                                onClick={() => setSelectedMotor(m.id)}
                                className={`motor-tab ${selectedMotor === m.id ? 'active' : ''}`}
                            >
                                <div style={{fontWeight: 'bold'}}>{m.name}</div>
                                <div style={{fontSize: '0.75rem', opacity: 0.8}}>{m.category}</div>
                            </div>
                        ))}
                    </div>

                    {/* é¸æŠã•ã‚ŒãŸãƒ¢ãƒ¼ã‚¿ãƒ¼ã®è©³ç´° */}
                    <div className="motor-card">
                        <div style={{display: 'flex', alignItems: 'flex-start', gap: '20px', flexWrap: 'wrap'}}>
                            <RotorDiagram type={motor.rotorType} />
                            <div style={{flex: 1, minWidth: '300px'}}>
                                <h2 style={{fontSize: '1.5rem', color: '#3B82F6', margin: '0 0 10px 0'}}>{motor.name}</h2>
                                <p style={{color: '#D1D5DB', marginBottom: '15px'}}>{motor.description}</p>
                                <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px', fontSize: '0.9rem'}}>
                                    <div>
                                        <div style={{color: '#9CA3AF', fontSize: '0.8rem', marginBottom: '5px'}}>ç‰¹å¾´</div>
                                        <ul style={{margin: 0, paddingLeft: '15px'}}>
                                            {motor.features.map((f, i) => (
                                                <li key={i} style={{color: '#D1D5DB', fontSize: '0.8rem', marginBottom: '3px'}}>{f}</li>
                                            ))}
                                        </ul>
                                    </div>
                                    <div>
                                        <div style={{color: '#9CA3AF', fontSize: '0.8rem', marginBottom: '5px'}}>ä¸»ãªç”¨é€”</div>
                                        <p style={{color: '#D1D5DB', fontSize: '0.8rem', margin: '0 0 15px 0'}}>{motor.applications}</p>
                                        <div style={{display: 'flex', justifyContent: 'space-between', fontSize: '0.8rem', marginBottom: '5px'}}>
                                            <span style={{color: '#9CA3AF'}}>çªå…¥é›»æµå€ç‡:</span>
                                            <span style={{color: '#F59E0B', fontWeight: 'bold'}}>{motor.inrushMultiplier}å€</span>
                                        </div>
                                        <div style={{display: 'flex', justifyContent: 'space-between', fontSize: '0.8rem'}}>
                                            <span style={{color: '#9CA3AF'}}>å§‹å‹•ãƒˆãƒ«ã‚¯:</span>
                                            <span style={{color: '#22C55E', fontWeight: 'bold'}}>{motor.startTorque} p.u.</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®š */}
                    <div className="parameter-grid">
                        <div className="parameter-item">
                            <label>å®šæ ¼å‡ºåŠ› [kW]</label>
                            <input type="range" min="0.75" max="37" step="0.25" value={ratedPower}
                                onChange={(e) => setRatedPower(parseFloat(e.target.value))} />
                            <div style={{color: '#3B82F6', fontWeight: 'bold', marginTop: '5px'}}>{ratedPower} kW</div>
                        </div>
                        <div className="parameter-item">
                            <label>å®šæ ¼é›»åœ§ [V]</label>
                            <select value={ratedVoltage} onChange={(e) => setRatedVoltage(parseInt(e.target.value))}>
                                <option value={200}>200V</option>
                                <option value={400}>400V</option>
                                <option value={6600}>6.6kV</option>
                            </select>
                        </div>
                        <div className="parameter-item">
                            <label>é›»æºå‘¨æ³¢æ•° [Hz]</label>
                            <select value={frequency} onChange={(e) => setFrequency(parseInt(e.target.value))}>
                                <option value={50}>50Hz</option>
                                <option value={60}>60Hz</option>
                            </select>
                        </div>
                        <div className="parameter-item">
                            <label>åœæ­¢æ™‚é–“ [ms]</label>
                            <input type="range" min="0" max="100" step="10" value={stopTime}
                                onChange={(e) => setStopTime(parseInt(e.target.value))} />
                            <div style={{color: '#9CA3AF', fontWeight: 'bold', marginTop: '5px'}}>{stopTime} ms</div>
                        </div>
                        <div className="parameter-item">
                            <label>æŠ•å…¥ä½ç›¸è§’ [Â°]</label>
                            <input type="range" min="0" max="360" step="15" value={switchingAngle}
                                onChange={(e) => setSwitchingAngle(parseInt(e.target.value))} />
                            <div style={{color: '#A855F7', fontWeight: 'bold', marginTop: '5px'}}>{switchingAngle}Â° 
                                <span style={{fontSize: '0.8rem', color: '#3B82F6'}}> {getPhaseDescription(switchingAngle)}</span>
                            </div>
                        </div>
                        <div className="parameter-item">
                            <label>DCæ¸›è¡°æ™‚å®šæ•° [ms]</label>
                            <input type="range" min="10" max="200" step="5" value={dcTimeConstant}
                                onChange={(e) => setDcTimeConstant(parseInt(e.target.value))} />
                            <div style={{color: '#EC4899', fontWeight: 'bold', marginTop: '5px'}}>{dcTimeConstant} ms</div>
                        </div>
                        <div className="parameter-item">
                            <label>è¡¨ç¤ºã‚µã‚¤ã‚¯ãƒ«æ•°</label>
                            <input type="range" min="3" max="30" step="1" value={viewCycles}
                                onChange={(e) => setViewCycles(parseInt(e.target.value))} />
                            <div style={{color: '#22C55E', fontWeight: 'bold', marginTop: '5px'}}>{viewCycles} ã‚µã‚¤ã‚¯ãƒ«</div>
                        </div>
                        <div className="parameter-item">
                            <label>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</label>
                            <button 
                                className={`toggle-button ${showCircuit ? 'active' : ''}`}
                                onClick={() => setShowCircuit(!showCircuit)}
                            >
                                ç­‰ä¾¡å›è·¯è¡¨ç¤º
                            </button>
                        </div>
                    </div>

                    {/* è¨ˆç®—çµæœ */}
                    <div className="stats-grid">
                        <div className="stat-card">
                            <div style={{fontSize: '0.8rem', color: '#9CA3AF'}}>å®šæ ¼é›»æµ</div>
                            <div className="stat-value" style={{color: '#22C55E'}}>{simulationData.ratedCurrent.toFixed(1)} A</div>
                        </div>
                        <div className="stat-card">
                            <div style={{fontSize: '0.8rem', color: '#9CA3AF'}}>å®šæ ¼ãƒ”ãƒ¼ã‚¯</div>
                            <div className="stat-value" style={{color: '#10B981'}}>{simulationData.peakRated.toFixed(1)} A</div>
                        </div>
                        <div className="stat-card">
                            <div style={{fontSize: '0.8rem', color: '#9CA3AF'}}>çªå…¥ãƒ”ãƒ¼ã‚¯</div>
                            <div className="stat-value" style={{color: '#F59E0B'}}>{simulationData.peakInrush.toFixed(1)} A</div>
                        </div>
                        <div className="stat-card">
                            <div style={{fontSize: '0.8rem', color: '#9CA3AF'}}>æœ€å¤§ç¬æ™‚é›»æµ</div>
                            <div className="stat-value" style={{color: '#EF4444'}}>{simulationData.maxCurrent.toFixed(1)} A</div>
                        </div>
                        <div className="stat-card">
                            <div style={{fontSize: '0.8rem', color: '#9CA3AF'}}>å¯¾å®šæ ¼æ¯”</div>
                            <div className="stat-value" style={{color: '#DC2626'}}>{(simulationData.maxCurrent / simulationData.peakRated).toFixed(1)} å€</div>
                        </div>
                    </div>

                    {/* ä¸‰ç›¸é›»æµæ³¢å½¢ã‚°ãƒ©ãƒ• */}
                    <div className="chart-container">
                        <h3 style={{margin: '0 0 20px 0', fontSize: '1.2rem', color: '#D1D5DB'}}>ä¸‰ç›¸é›»æµæ³¢å½¢ - {motor.name}</h3>
                        <SimpleChart data={simulationData.data} selectedMotor={selectedMotor} />
                    </div>

                    {/* ç­‰ä¾¡å›è·¯ï¼ˆç°¡æ˜“ç‰ˆï¼‰ */}
                    {showCircuit && (
                        <div className="circuit-container">
                            <h3 style={{margin: '0 0 15px 0', fontSize: '1.2rem', color: '#22C55E'}}>
                                {motor.name} - ç­‰ä¾¡å›è·¯ã®æ¦‚å¿µ
                            </h3>
                            <div style={{padding: '20px', backgroundColor: '#111827', borderRadius: '8px', textAlign: 'center'}}>
                                {motor.category === 'èª˜å°æ©Ÿ' ? (
                                    <div>
                                        <p style={{color: '#D1D5DB', marginBottom: '15px'}}>
                                            èª˜å°æ©Ÿç­‰ä¾¡å›è·¯: Râ‚ + jXâ‚ + (jXâ‚˜ || Râ‚‚'/s + jXâ‚‚')
                                        </p>
                                        <div style={{color: '#9CA3AF', fontSize: '0.9rem'}}>
                                            <p>Râ‚: ä¸€æ¬¡æŠµæŠ—, Xâ‚: ä¸€æ¬¡æ¼ã‚Œãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹</p>
                                            <p>Xâ‚˜: åŠ±ç£ãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹, Râ‚‚'/s: äºŒæ¬¡æŠµæŠ—ï¼ˆs=ã‚¹ãƒªãƒƒãƒ—ï¼‰</p>
                                            {motor.id === 'woundRotor' && (
                                                <p style={{color: '#A855F7'}}>å·»ç·šå‹: å¤–éƒ¨æŠµæŠ—ã§å§‹å‹•é›»æµåˆ¶å¾¡å¯èƒ½</p>
                                            )}
                                        </div>
                                    </div>
                                ) : (
                                    <div>
                                        <p style={{color: '#D1D5DB', marginBottom: '15px'}}>
                                            åŒæœŸæ©Ÿç­‰ä¾¡å›è·¯: Râ‚ + jXâ‚› + Eï¼ˆèª˜èµ·é›»åœ§ï¼‰
                                        </p>
                                        <div style={{color: '#9CA3AF', fontSize: '0.9rem'}}>
                                            <p>Râ‚: é›»æ©Ÿå­æŠµæŠ—, Xâ‚›: åŒæœŸãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹</p>
                                            <p>E: ç•Œç£ã«ã‚ˆã‚‹èª˜èµ·é›»åœ§</p>
                                            {motor.id === 'salientPole' && (
                                                <p style={{color: '#EC4899'}}>çªæ¥µå‹: Xd â‰  Xq (ç›´è»¸ãƒ»æ¨ªè»¸ãƒªã‚¢ã‚¯ã‚¿ãƒ³ã‚¹)</p>
                                            )}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* æ¯”è¼ƒè¡¨ */}
                    <div style={{backgroundColor: '#374151', borderRadius: '8px', padding: '20px'}}>
                        <h3 style={{margin: '0 0 15px 0', fontSize: '1.2rem', color: '#D1D5DB'}}>ãƒ¢ãƒ¼ã‚¿ãƒ¼ç¨®é¡ã®æ¯”è¼ƒ</h3>
                        <table className="comparison-table">
                            <thead>
                                <tr>
                                    <th>ãƒ¢ãƒ¼ã‚¿ãƒ¼ç¨®é¡</th>
                                    <th>ã‚«ãƒ†ã‚´ãƒª</th>
                                    <th>çªå…¥å€ç‡</th>
                                    <th>å§‹å‹•ãƒˆãƒ«ã‚¯</th>
                                    <th>ä¸»ãªç”¨é€”</th>
                                </tr>
                            </thead>
                            <tbody>
                                {Object.values(MOTOR_TYPES).map((m) => (
                                    <tr 
                                        key={m.id}
                                        onClick={() => setSelectedMotor(m.id)}
                                        style={{backgroundColor: selectedMotor === m.id ? '#4B5563' : 'transparent'}}
                                    >
                                        <td style={{color: '#3B82F6', fontWeight: 'bold'}}>{m.name}</td>
                                        <td>{m.category}</td>
                                        <td style={{color: '#F59E0B', fontWeight: 'bold'}}>{m.inrushMultiplier}å€</td>
                                        <td style={{color: '#22C55E', fontWeight: 'bold'}}>{m.startTorque} p.u.</td>
                                        <td style={{fontSize: '0.85rem'}}>{m.applications}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>

                    {/* ãƒ•ãƒƒã‚¿ãƒ¼ */}
                    <footer style={{textAlign: 'center', marginTop: '40px', padding: '20px', color: '#9CA3AF', fontSize: '0.9rem'}}>
                        <p>ğŸ“š ãƒ¢ãƒ¼ã‚¿ãƒ¼å­¦ç¿’æ•™æãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | ğŸ”— <a href="../" style={{color: '#3B82F6'}}>ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a></p>
                        <p style={{fontSize: '0.8rem', marginTop: '10px'}}>
                            ã“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯æ•™è‚²ç›®çš„ã§ä½œæˆã•ã‚Œã¾ã—ãŸã€‚å®Ÿéš›ã®è¨­è¨ˆã«ã¯å°‚é–€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¨ç‰©ç†è©¦é¨“ãŒå¿…è¦ã§ã™ã€‚
                        </p>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<MotorStartupSimulator />, document.getElementById('root'));
    </script>
</body>
</html>